<template name="listing">
  {{#contentFor "headerButtonLeft"}}
      <button class="button button-clear" data-ion-menu-toggle="left">
        {{> ionIcon icon='navicon' class="energized"}}
      </button>

      {{> searchHeader}}
  {{/contentFor}}

  {{#contentFor "headerTitle"}}
    <h1 class="title" style="text-align:center;">Search Products</h1>
  {{/contentFor}}

  {{#contentFor "headerButtonRight"}}
    <a href="/" class="button button-clear">
      <img id="spinner-logo-simple" src="{{ getImage 'spinner-logo' }}" />
    </a>
  {{/contentFor}}
<!--
 {{#contentFor "headerButtonRight"}}
    <button class="button button-clear pull-right">
    </button>
 {{/contentFor}}
-->

<!--   {{#contentFor "headerButtonRight"}}
    <button data-ion-modal="filter" class="button button-clear custom-icon ion-ios-keypad button-energized"></button>
  {{/contentFor}} -->

  {{> searchBox}}

  {{#ionView}}
    {{#ionContent class="has-subheader overflow-scroll"}}
      {{> searchResult}}
    {{/ionContent}}
  {{/ionView}}
</template>


<template name="searchBox">

<!--
    <div class="list list-inset" style="margin:0">
      <label class="item item-input">
        <i class="icon ion-search placeholder-icon"></i>
        <input type="text" id="search-box" placeholder="type keywords to search..." value="{{searchText}}">
      </label>
    </div>
-->

    <div class="bar bar-subheader categoriesFilter center" style="padding:0;">
        <div class="row">
            <div class="categoryFilter col col-15 {{isActivated 0}}">
                <i class="{{getCategoryIcon 0}}"></i>
                <span>{{getCategory 0}}</span>
            </div>
            <div class="categoryFilter col col-15 {{isActivated 1}}">
                <i class="{{getCategoryIcon 1}}"></i>
                <span>{{getCategory 1}}</span>
            </div>
            <div class="categoryFilter col col-15 {{isActivated 2}}">
                <i class="{{getCategoryIcon 2}}"></i>
                <span>{{getCategory 2}}</span>
            </div>
            <div class="categoryFilter col col-15 {{isActivated 3}}">
                <i class="{{getCategoryIcon 3}}"></i>
                <span>{{getCategory 3}}</span>
            </div>
            <div class="categoryFilter col col-15 {{isActivated 4}}">
                <i class="{{getCategoryIcon 4}}"></i>
                <span>{{getCategory 4}}</span>
            </div>
            <div class="categoryFilter col col-15 {{isActivated 5}}">
                <i class="{{getCategoryIcon 5}}"></i>
                <span>{{getCategory 5}}</span>
            </div>
        </div>
    </div>

</template>

<template name="searchResult">
  <div id="search-meta">
    {{#if isLoading}}
      {{>loadingTemplate}}
    {{/if}}
  </div>

  {{#if getPackages}}
    <div id='search-result' class="list">
      {{#each getPackages}}
        <div class="package {{isCategorySelected}}">
            {{#ionItem path='search' _id=this._id class="item-avatar-2 qty-check"}}
          <!-- {{#ionItem path='bookDetail' _id=this._id iconRight=true class="item-avatar-2"}} -->
                <div class="product-avatar">
                  <img class="product-avatar-inner" src="{{image}}"/>
                </div>
                <div class="ellipsis">
                    <p class="main-title-text">{{title}}</p>
                </div>
                <table class="rent-table">
                    <tbody>
                        <tr>
                            <th><i class="icon">D</i></th>
                            <th><i class="icon">W</i></th>
                            <th><i class="icon">M</i></th>
                            <th><i class="icon">S</i></th>
                        </tr>
                        <tr>
                            <td>{{../getMinDayRangePrice title}}</td>
                            <td>{{../getMinWeekRangePrice title}}</td>
                            <td>{{../getMinMonthRangePrice title}}</td>
                            <td>{{../getMinSemesterRangePrice title}}</td>
                        </tr>
                    </tbody>
                </table>
                <span class="badge-qty-users">{{../getQtyUsers qty}}</span>
                <div class="item-icon-right">
                    {{> ionIcon icon="ios-arrow-right" class="energized right-arrow"}}
                </div>
            {{/ionItem}}
        </div>
      {{/each}}
    </div>
  {{else}}
    {{#if isLoading}}
    {{else}}
      <div class="Aligner">
        <h6 class="dark">Nothing found!</h6>
      </div>
    {{/if}}
  {{/if}}
</template>

<template name="loadingTemplate"></template>
