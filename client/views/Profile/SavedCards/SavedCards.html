<template name="savedCards">
  {{#contentFor "headerButtonLeft"}}
    {{>ionNavBackButton}}
  {{/contentFor}}

  {{#contentFor "headerButtonLeft"}}
    {{>ionNavBackButton}}
  {{/contentFor}}


    {{#contentFor "headerTitle"}}
      <h1 class="title" style="text-align:center;">Payment Cards</h1>
    {{/contentFor}}

  {{#ionView}}
    {{#ionContent class="savedCard"}}

      <br>
      <div class="panecard padding list">

        <div class="item item-divider item-button-right">
          <h3>Cards</h3>
          <button id="test-card" class="button button-small push-up button-clear"><h6 class="positive">Test Cards</h6></button>
        </div>

        {{#with listCards}}
          {{id}}
        {{/with}}

        {{#each cards}}
          <div class="item item-card" data-id="{{id}}" data-funding="{{funding}}">
              <table>
                <tbody>
                    <tr>
                        <td class="brand"><i class="{{../getBrandIcon brand}}"></i></td>
                        <td class="funding"><i>{{funding}}</i></td>
                        <td class="numbers"><i>XXXX-{{last4}}</i></td>
                        <td class="pay"><i class="set-default set-pay-default {{../checkPayDefault id}}">PAY</i></td>
                        <td class="receive"><i class="set-default set-receive-default {{../checkReceiveDefault id}}">{{../isDebit funding}}</i></td>
                        <td class="trash"><i class="delete-card icon ion-ios-trash"></i></td>
                    </tr>
                </tbody>
              </table>
          </div>
        {{/each}}

        <div class="item item-icon-left" data-ion-modal="addnewCard">
          <i class="icon ion-ios-plus-outline energized custom-icon"></i>
          <p class="graytext">New card</p>
        </div>
      </div>

      <div class="panecard padding list">
        <div class="item item-icon-left hidden alerts no-cards">
          <i class="icon assertive ion-alert-circled"></i>
          <p class="assertive">Add a card to be able to share or borrow an item.</p>
        </div>
        <div class="item item-icon-left energized hidden alerts only-credit">
          <i class="icon energized ion-alert-circled "></i>
          <p class="energized">Please, add a debit card if you want share an item.</p>
        </div>


        <div class="checkbox ">

          <p class="submit-note">

          </p>

          <label><input type="checkbox" class="item-checkbox" value="" >By registering your account, you agree to our </label><a href="#link-to-your-own-ToS" data-ion-modal="modalTermOfService">Terms of Service</a> and the <a target="_blank" href="https://stripe.com/connect/account-terms">Stripe Connected Account Agreement</a>.
        </div>

      </div>

      <div class="padding">
        <h3>debugging</h3>
        {{#with getReceiveCard }}
          <div>
            <i class="set-default icon ion-checkmark energized"></i> DefaultReceiveCard = {{id}} - {{funding}} - {{last4}}
          </div>
        {{/with}}

        {{#with getPayCard }}
          <div>
            <i class="set-default icon ion-checkmark bluegrey"></i> DefaultPayCard = {{id}} - {{funding}} - {{last4}}
          </div>
        {{/with}}
      </div>

    {{/ionContent}}
  {{/ionView}}
</template>

<template name="addnewCard">
  {{#ionModal customTemplate=true class="new-card"}}
    
    <div class="bar bar-header bar-royal">
      <h2 class="title header-title"> Add New Card </h2>
      <button type="button" id="closeAddNewCard" data-dismiss="modal" style="right: 5px;position: absolute;" title="Close" class="button button-clear">
            <i class="icon ion-ios-close-outline"></i>
      </button>
    </div>
    
    <div class="list has-header padding-horizontal padding-vertical">
        <div class="card">
          <div class="card-wrapper"></div>
          <div class="form-container active">
            <form class="newCardForm" method="post">
              <label class="item item-input" style="border-top: 1px solid #ddd;">
                <i class="icon ion-compose placeholder-icon"></i>
                <input type="text" name="number" class="border-radius-20" placeholder="**** **** **** ****">
              </label>
              <label class="item item-input">
                <i class="icon ion-card placeholder-icon"></i>
                <input type="text" name="name" class="border-radius-20" placeholder="Full Name">
              </label>

              <label class="item item-input">
                <i class="icon ion-calendar placeholder-icon"></i>
                <input type="text" name="expiry" class="border-radius-20" placeholder="MM/YY">
              </label>

              <label class="item item-input">
                <i class="icon ion-ios-locked placeholder-icon"></i>
                <input type="text" name="cvc" class="border-radius-20" placeholder="***">
              </label>

                <label class="item item-button">
                    <button class="button button-block button-energized"> SUBMIT </button>
                </label>
            </form>
          </div>
        </div>
    </div>

    <!-- <script src="/card.js"></script> -->

    <script>
      new Card({
        form: document.querySelector('form'),
        container: '.card-wrapper'
      });
    </script>


  {{/ionModal}}
</template>
